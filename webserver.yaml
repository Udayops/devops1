- name: Install Webserver 
  hosts: centos1
  become: true
  gather_facts: False
  tasks:
    - name: install the webserver Apache
      yum:
        name: httpd
        state: present
    - name: start the webserver
      service:
        name: httpd
        state: started
    - name: Change the port to 8080
      lineinfile:
        path: /etc/httpd/conf/httpd.conf
        regexp: "^Listen"
        line: Listen 8080
      notify: restart webserver
  handlers:    
    - name: restart webserver
      service:
        name: httpd
        state: restarted
